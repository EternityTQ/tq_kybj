---
title: 5.4 控制器的功能和工作原理
---

## 1. 硬布线控制器

根据操作指令码、目前的机器周期、节拍信号、机器状态条件，即可确定现在这个节拍下应该发出哪些"微命令"

指令操作码来源：指令码译码器，由IR输入

机器周期：四个触发器，集成在CU内部

节拍信号：节拍发生器接入，每个时钟周期发出一个节拍信号

机器状态条件：来自执行单元的反馈信息，可能来自PSW、ACC的符号位；也可能来自IO设备、主存


设计步骤：

1. 分析每个阶段的微操作序列
2. 选择CPU的控制方式
3. 安排微操作时序
4. 电路设计
    - 列出操作时间表
    - 列出微操作命令的最简表达式
    - 画出逻辑图


安排微操作时序的原则：

1. 微操作的先后顺序不得随意更改
2. 被控对象不同的微操作，尽量安排在一个节拍内完成
3. 占用时间较短的微操作，尽量安排在一个节拍内完成，并允许有先后顺序

特点：指令越多，设计和实现就越复杂，因此一般用于RISC

如果扩充新指令，则设计就需要大改，因此扩充指令较困难

由于使用纯硬件实现控制，因此实现速度很快。

微操作控制信号由组合逻辑电路即时产生

## 2. 微程序控制器

考察频率更高

采用“存储程序”的思想，CPU出场前将所有指令的微程序存入控制器存储器中

微命令和微操作一一对应

微指令中可能包含多个微命令

微程序：由微指令序列组成，每一种指令对应一个微程序

指令：对程序执行步骤的描述

微指令：对指令执行步骤的描述

指令是对微指令功能的封装

控制存储器：CM


CM由ROM构成

CMAR：别名：μPC，微地址寄存器，接受微地址形成部件送来的微地址，为在CM中读取微指令做准备


CMDR：别名：μIR，用于存放从CM中取出的微指令

微地址形成部件：产生初始微地址和后续微地址，保证微指令的连续执行



