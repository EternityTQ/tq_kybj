---
title: 6.2 总线事务与定时
---

## 1. 总线事务


五个阶段：

请求、总裁、寻址、传输、释放

数据传送方式分为非突发和突发

非突发传送方式：每个传送周期内==都==先传送地址，再传送数据，主从设备每次都只能传输一个字长的数据；每次传送都需要传送地址、准备数据、传输数据

突发传送方式：能够进行连续成组数据的传送，寻址阶段发送的是连续数据单元的首地址，不释放总线

## 2. 总线定时

### 2.1 同步定时(同步通信)

系统采用==统一时钟信号==来协调主从设备的传送定时关系

时钟产生相等的时间间隔，每个间隔构成一个总线周期

优点：传送速度快，具有较高的传输速率；总线控制逻辑简单

缺点：主从设备数据强制性同步，不能及时进行数据通信的有效性检验，可靠性较差

适用总线长度较短，所接部件存取时间接近的系统

存取时间不同也能用，但是无法发挥高效性能

### 2.2 异步定时(异步通信)

没有统一的时钟，由主设备提出信息交换请求，从设备接到请求后，通过接口发出回答信号

优点：总线周期长度可变，能够自动适应主从设备的时间配合

缺点：比同步控制方式稍微复杂，速度比同步定时方式慢

#### 2.2.1 不互锁方式

主设备发送请求信号后，无需等待从设备的回答信号，经过一段时间后自动撤销

从设备接到请求信号后，发出回答信号，经过一段时间后自动撤销

#### 2.2.2 半互锁方式

主设备发送请求信号后，必须等待从设备的回答信号后，才撤销请求信号

从设备接到请求信号后，发出回答信号，经过一段时间后自动撤销

#### 2.2.3 全互锁方式

主设备发送请求信号后，必须等待从设备的回答信号后，才撤销请求信号

从设备接到请求信号后，发出回答信号，必须在获知主设备已撤销请求信号后再撤销回答信号

以上三种速度越来越慢，可靠性越来越高

### 2.3 半同步定时方式

保留了同步通信的特点，但是增设wait响应信号线

若wait信号无效，说明信号还未准备好，继续等待下个时钟信号

若wait信号有效，则开始采样

优点：控制方式比异步定时简单，可靠性较高

缺点：系统时钟频率不能要求太高，整体来说，速度不快

### 2.4 分离式定时方式

将总线事务分解为请求和应答两个子过程

请求过程中，主设备A获取主线使用权后，将命令、地址发送至总线上，然后立即释放总线

应答过程中，B设备将设备A所需的数据准备好后，申请总线使用权，将数据放到总线上

优点：不传送数据时释放总线，不存在空闲等待时间

缺点：控制复杂，开销也大










